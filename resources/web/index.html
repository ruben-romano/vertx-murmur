<html>
	<head>
		
		<link href="scripts/semantic-ui/css/semantic.css" rel="stylesheet" type="text/css"></link>
		<link href="styles/murmur.css" rel="stylesheet" type="text/css"></link>		
		
		<script src="scripts/lib/sockjs.min.js"></script>
		<script src="scripts/lib/vertxbus.js"></script>
		<script src="scripts/lib/react.js"></script>
		<script src="scripts/lib/JSXTransformer.js"></script>
		<script src="scripts/lib/jquery-2.1.1.min.js"></script>
		<script src="scripts/semantic-ui/javascript/semantic.js"></script>

		<script type="text/jsx" src="scripts/murmur/store/event-bus.js"></script>
		<script type="text/jsx" src="scripts/murmur/store/global.js"></script>		
		<script type="text/jsx" src="scripts/murmur/store/message-repository.js"></script>

		<script type="text/jsx" src="scripts/murmur/components/chat.js"></script>
		<script type="text/jsx" src="scripts/murmur/components/chat-list.js"></script>
		<script type="text/jsx" src="scripts/murmur/components/chat-box.js"></script>

	</head>
	<body>
		<!-- Main Header -->
		<div class="container">					
			<div class="ui">
				<div class="ui inverted segment site-header">
					<i class="circular inverted black users icon link icon" id="user-button">
					</i>
					<div class="ui icon input chat-input">
					  <input type="text" placeholder="Chat..." id="chat-input" autofocus />
					  <i class="comment icon"></i>
					</div>
					<div class="ui right floated huge header">murmur</div>	
				</div>							
			</div>	
		</div>

		<div id="chat-box-content"></div>		

		<!-- Login Modal -->
		<div class="ui small modal" id="login-modal">
			<div class="ui one column middle aligned relaxed grid basic segment">
			  <div class="column">
			    <div class="ui center aligned form segment">
			      <div class="ui header">
			        <label class="ui large header">murmur</label>
			        <div class="ui fluid left icon input">
			          <input type="text" placeholder="Username" id="username-input">
			          <i class="user icon"></i>
			        </div>
			      </div>
			      <div class="ui black submit button" id="login-button">Login</div>
			    </div>
			  </div>
			</div>
		</div>

		<!-- User Select Modal -->


		<script>

			$('#login-modal')
			  .modal('setting', 'closable', false)
			  .modal('show');

			$('#user-modal') 
				.modal('setting', 'closable', true)
				.modal('hide');

			var loginButton = $("#login-button");
			loginButton.click(function() {
				Global.currentUser = $("#username-input").val();
				MessageRepo.loadMessages();				
				$('#login-modal')
					.modal('hide');
			}); 
	
			var chatInput = $('#chat-input');
			chatInput.keypress(function(e) {
			    if(e.which == 13) {			
			    	var message = chatInput.val();    	
			        chatInput.val("");					
					if (message.trim() == "") {
						return;
					}		
					MessageRepo.sendMessage(message);
			    }
			});		

			var userButton = $('#user-button');
			userButton.click(function() {
				alert('hello');
			});

		</script>

	</body>
</html>
